# Yandex Telemost для Битрикс24

Полнофункциональное локальное приложение для интеграции с Yandex Telemost через Битрикс24.

## Функциональность

- Создание видеоконференций и трансляций в Yandex Telemost
- Синхронизация с календарем Битрикс24
- Управление участниками и соорганизаторами
- Интеграция с API Битрикс24 и Yandex Telemost

## Установка

### Требования

- Python 3.7+
- pip
- Node.js 14+ и npm (для сборки CSS)

### Установка зависимостей

1. Установите Python зависимости:
```bash
pip install -r requirements.txt
```

2. Установите Node.js зависимости для Tailwind CSS:
```bash
npm install
```

3. Соберите CSS для продакшена:
```bash
npm run build:css
```

Для разработки с автоматической пересборкой CSS:
```bash
npm run watch:css
```

### Настройка конфигурации

1. Скопируйте `.env.example` в `.env`:
   ```bash
   cp .env.example .env
   ```

2. Заполните все необходимые переменные в файле `.env`:
   - `BITRIX24_CLIENT_ID` и `BITRIX24_CLIENT_SECRET` - данные приложения Битрикс24
   - `YANDEX_CLIENT_ID` и `YANDEX_CLIENT_SECRET` - данные приложения Yandex

### Запуск приложения

```bash
python run.py
```

Приложение будет доступно по адресу: `http://localhost:5000`

## Интеграция с Битрикс24

Для установки приложения в Битрикс24:

1. Перейдите в "Приложения" → "Мои приложения"
2. Создайте новое приложение с URL: `https://ваш-домен/install`
3. Приложение автоматически обработает установку и настройку аутентификации

## Структура проекта

```
telemost-bitrix-app/
├── app.py                 # Основное Flask-приложение
├── config.py              # Конфигурация приложения
├── requirements.txt       # Зависимости Python
├── .env                   # Переменные окружения
├── models/                # Модели API
│   ├── bitrix24.py        # Обертка для API Битрикс24
│   └── telemost.py        # Обертка для API Yandex Telemost
├── templates/             # HTML шаблоны
│   ├── index.html         # Основная страница приложения
│   ├── install.html       # Страница установки
│   └── auth.html          # Страница аутентификации
├── static/                # Статические файлы
│   ├── css/               # Файлы стилей
│   └── js/                # JavaScript файлы
└── utils/                 # Вспомогательные функции
    └── auth.py            # Функции аутентификации
```

## API Endpoints

- `GET /` - Основная страница приложения
- `POST /install` - Обработка установки приложения в Битрикс24
- `GET /auth/bitrix24` - Аутентификация с Битрикс24
- `GET /auth/yandex` - Аутентификация с Yandex Telemost
- `GET /api/conferences` - Получить список конференций
- `POST /api/conferences` - Создать конференцию
- `DELETE /api/conferences/<id>` - Удалить конференцию
- `GET /logout` - Выход из приложения

## Безопасность

- Все OAuth токены хранятся в сессии и зашифрованы
- Используется CSRF-защита
- Проверка подлинности для всех чувствительных операций

## Развертывание

Для развертывания на продакшен-сервере:

1. Обновите настройки безопасности в `config.py`
2. Используйте HTTPS
3. Настройте надежный ключ шифрования
4. Настройте логирование

## Поддержка

Для вопросов и поддержки создайте issue в репозитории.